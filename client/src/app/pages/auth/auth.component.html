<div class="auth">
  <h1 class="title">{{ isCodeVerification ? 'Введите код подтверждения' : 'Авторизация' }}</h1>

  <form class="auth-form" [formGroup]="form" (ngSubmit)="onSubmit()">
    @if (apiError) {
      <div class="api-error">
        {{ apiError }}
      </div>
    }

    @if (!isCodeVerification) {
      <div class="auth-input">
        <app-input
          label="Email"
          [control]="form.controls['email']"
          class="auth-input"
          type="email"
          placeholder="example@mail.com"
          size="md"
          errorText="Корректный email обязателен"
        ></app-input>

        <app-input
          label="Пароль"
          [control]="form.controls['password']"
          class="auth-input"
          type="password"
          placeholder="Введите пароль"
          size="md"
          errorText="Минимум 8 символов"
        ></app-input>
      </div>
    }

  @if (isCodeVerification) {
    <div class="code-verification">
      <p class="code-instruction">Мы отправили 6-значный код на {{ form.value.email }}</p>

      <app-input
        label="Код подтверждения"
        [control]="form.controls['code']"
        type="text"
        placeholder="Введите 6 цифр"
        size="md"
        errorText="Код должен содержать 6 цифр"
        maxlength="6"
      ></app-input>
    </div>
  }

    <button class="btn-primary btn-md" [disabled]="form.invalid"> {{ isCodeVerification ? 'Подтвердить' : 'Продолжить' }}</button>
  </form>
</div>
